<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Movie Review & Rating Platform</title>
<style>
:root{--accent:#d18fff;--text:#222;--muted:#666;}
body{margin:0;font-family:system-ui;background:linear-gradient(135deg,#7b2ff7,#f107a3,#9d50bb);background-size:600% 600%;animation:bgAnim 20s ease infinite;color:var(--text);}
@keyframes bgAnim{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
header{position:sticky;top:0;background:rgba(255,255,255,.8);backdrop-filter:blur(8px);border-bottom:2px solid #fff;padding:16px;}
h1{margin:0 0 12px;color:#fff;text-shadow:0 2px 6px rgba(0,0,0,.4);}
.toolbar{display:flex;gap:10px;flex-wrap:wrap;}
input,select{flex:1 1 260px;background:#fff;border:2px solid #d18fff;padding:10px 12px;border-radius:12px;box-shadow:0 2px 4px rgba(0,0,0,.1);}
input:focus,select:focus{border-color:var(--accent);box-shadow:0 0 6px var(--accent);}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:16px;padding:20px 0;}
.card{border-radius:16px;overflow:hidden;background:#fff;cursor:pointer;transition:.3s ease;box-shadow:0 4px 12px rgba(0,0,0,.15);position:relative;}
.card::before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;border-radius:16px;pointer-events:none;opacity:0;background:linear-gradient(45deg,#d18fff,#ff87d1,#ffd700,#d18fff);background-size:400% 400%;animation:none;}
.card:hover::before{opacity:0.4;animation: glow 3s linear infinite;}
@keyframes glow{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
.poster{width:100%;height:260px;overflow:hidden;}
.poster img{width:100%;height:100%;object-fit:cover;display:block;transition:transform .3s;}
.card:hover .poster img{transform:scale(1.05);}
.content{padding:12px;}
.title{font-weight:700;color:#6a0dad;margin:0;}
.meta{color:var(--muted);font-size:.85rem;margin:2px 0;}
.stars{display:flex;gap:3px;margin-top:6px;}
.star{cursor:pointer;font-size:18px;color:#999;transition:.2s;text-shadow:0 0 2px #000;}
.star.active{color:#ffd700;text-shadow:0 0 4px #fff,0 0 10px #ffd700,0 0 20px #ffd700;animation: starGlow 1.5s ease-in-out infinite alternate;}
.star:hover{transform:scale(1.3);text-shadow:0 0 4px #fff,0 0 10px #ffd700,0 0 20px #ffd700;animation: starGlow 1.5s ease-in-out infinite alternate;}
@keyframes starGlow{0%{text-shadow:0 0 2px #fff,0 0 5px #ffd700,0 0 10px #ffd700}50%{text-shadow:0 0 4px #fff,0 0 12px #ffd700,0 0 22px #ffd700}100%{text-shadow:0 0 2px #fff,0 0 5px #ffd700,0 0 10px #ffd700}}
.avg{margin-left:6px;font-size:.85rem;color:#444;}
dialog{width:min(860px,96vw);border:none;border-radius:18px;background:#fff;color:#222;padding:0;box-shadow:0 8px 24px rgba(0,0,0,.4);}
dialog::backdrop{background:rgba(0,0,0,.4);}
.modal{display:grid;grid-template-columns:280px 1fr;gap:18px;padding:18px;}
.poster-large img{width:100%;border-radius:12px;}
.close{position:absolute;top:10px;right:10px;background:#d18fff;border:none;border-radius:50%;padding:6px 10px;cursor:pointer;color:#fff;font-weight:700;}
.tag{font-size:.72rem;padding:4px 8px;border-radius:999px;background:#ffd6ff;color:#6a0dad;margin:2px;}
textarea{width:100%;min-height:80px;background:#fff;border:2px solid #d18fff;border-radius:12px;padding:10px;}
.actions{display:flex;gap:10px;margin-top:8px;}
.btn{background:var(--accent);color:#fff;border:none;padding:10px 14px;border-radius:12px;font-weight:700;cursor:pointer;box-shadow:0 3px 8px rgba(0,0,0,.2);}
.btn:hover{background:#9d50bb;transform:scale(1.03);}
.btn.ghost{background:#fff;color:#6a0dad;border:2px solid #d18fff;}
.review{background:#fff0ff;border:1px solid #ffd6ff;padding:10px 12px;border-radius:12px;}
#trailer{display:inline-block;margin:8px 0;padding:6px 10px;background:#d18fff;color:#fff;border-radius:12px;text-decoration:none;font-weight:700;transition:.2s;}
#trailer:hover{background:#9d50bb;transform:scale(1.05);box-shadow:0 4px 12px rgba(0,0,0,.3);}
@media(max-width:760px){.modal{grid-template-columns:1fr;}}
</style>
</head>
<body>
<header class="container"><h1>Movie Review & Rating Platform</h1>
<div class="toolbar"><input id="q" type="search" placeholder="Search movies..."><select id="genre"><option value="">All genres</option></select></div></header>
<main class="container"><section id="grid" class="grid"></section></main>
<dialog id="dlg"><button class="close" id="closeBtn">âœ•</button>
<div class="modal"><div class="poster-large" id="dlgPoster"></div><div>
<h2 id="dlgTitle"></h2><div id="dlgTags"></div>
<a id="trailer" target="_blank">ðŸŽ¬ Watch Trailer</a>
<div class="stars" id="dlgStars"></div>
<div class="avg" id="dlgAvg"></div>
<textarea id="comment" placeholder="What did you think?"></textarea>
<div class="actions"><button class="btn" id="addReview">Post review</button><button class="btn ghost" id="clearMy">Clear rating</button></div>
<div id="reviews"></div></div></div></dialog>
<script>
const MOVIES=[
{id:"parasite",title:"Parasite",year:2019,genres:["Drama","Thriller"],poster:"https://upload.wikimedia.org/wikipedia/en/5/53/Parasite_%282019_film%29.png",trailer:"https://www.youtube.com/watch?v=SEUXfv87Wpk"},
{id:"interstellar",title:"Interstellar",year:2014,genres:["Sci-Fi","Drama"],poster:"https://upload.wikimedia.org/wikipedia/en/b/bc/Interstellar_film_poster.jpg",trailer:"https://www.youtube.com/watch?v=zSWdZVtXT7E"},
{id:"godfather",title:"The Godfather",year:1972,genres:["Crime","Drama"],poster:"https://upload.wikimedia.org/wikipedia/en/1/1c/Godfather_ver1.jpg",trailer:"https://www.youtube.com/watch?v=sY1S34973zA"},
{id:"traintobusan",title:"Train to Busan",year:2016,genres:["Horror","Thriller"],poster:"https://upload.wikimedia.org/wikipedia/en/9/95/Train_to_Busan.jpg",trailer:"https://www.youtube.com/watch?v=pyWuHv2-Abk"},
{id:"3idiots",title:"3 Idiots",year:2009,genres:["Comedy","Drama"],poster:"https://upload.wikimedia.org/wikipedia/en/d/df/3_idiots_poster.jpg",trailer:"https://www.youtube.com/watch?v=xvszmNXdM4w"},
{id:"oldboy",title:"Oldboy",year:2003,genres:["Thriller","Mystery"],poster:"https://upload.wikimedia.org/wikipedia/en/6/67/Oldboykoreanposter.jpg",trailer:"https://www.youtube.com/watch?v=2HkjrJ6IK5E"},
{id:"ratatouille",title:"Ratatouille",year:2007,genres:["Animation","Comedy"],poster:"https://upload.wikimedia.org/wikipedia/en/5/50/RatatouillePoster.jpg",trailer:"https://www.youtube.com/watch?v=NgsQ8mVkN8w"},
{id:"joker",title:"Joker",year:2019,genres:["Crime","Drama"],poster:"https://upload.wikimedia.org/wikipedia/en/e/e1/Joker_%282019_film%29_poster.jpg",trailer:"https://www.youtube.com/watch?v=zAGVQLHvwOY"}
];
const KEY="mrp-data-v1",load=()=>JSON.parse(localStorage.getItem(KEY)||"{}"),save=v=>localStorage.setItem(KEY,JSON.stringify(v)),
db={get:m=>load()[m]||{ratings:{},comments:[]},set:(m,v)=>{let d=load();d[m]=v;save(d)},
rate:(m,s)=>{let r=db.get(m);r.ratings.me=s;db.set(m,r)},clear:m=>{let r=db.get(m);delete r.ratings.me;db.set(m,r)},
add:(m,t,s)=>{let r=db.get(m);r.comments.unshift({text:t,stars:s,at:new Date().toISOString()});db.set(m,r)},
avg:m=>{let {ratings,comments}=db.get(m),v=[...Object.values(ratings),...comments.map(c=>c.stars)];return v.length?(v.reduce((a,b)=>a+b,0)/v.length).toFixed(1):0},
my:m=>db.get(m).ratings.me||0,comments:m=>db.get(m).comments};
const grid=document.getElementById("grid"),q=document.getElementById("q"),genreSel=document.getElementById("genre"),
dlg=document.getElementById("dlg"),dlgPoster=dlg.querySelector("#dlgPoster"),dlgTitle=dlg.querySelector("#dlgTitle"),
dlgTags=dlg.querySelector("#dlgTags"),dlgStars=dlg.querySelector("#dlgStars"),dlgAvg=dlg.querySelector("#dlgAvg"),
commentEl=document.getElementById("comment"),reviewsEl=document.getElementById("reviews"),trailer=document.getElementById("trailer");
let currentId=null;
function starRow(r){return `<div class="stars">${[1,2,3,4,5].map(i=>`<span class="star${i<=r?" active":""}">â˜…</span>`).join("")}</div>`}
function render(){grid.innerHTML="";let t=q.value.toLowerCase(),g=genreSel.value;
MOVIES.filter(m=>(!t||`${m.title} ${m.year} ${m.genres}`.toLowerCase().includes(t))&&(!g||m.genres.includes(g)))
.forEach(m=>grid.innerHTML+=`<article class="card" onclick="openModal('${m.id}')"><div class="poster"><img src="${m.poster}" alt="${m.title}"></div><div class="content"><div class="title">${m.title}</div><div class="meta">${m.genres.join(" â€¢ ")} â€¢ ${m.year}</div>${starRow(Math.round(db.avg(m.id)))}<span class="avg">${db.avg(m.id)||"No ratings yet"}</span></div></article>`)}
function stars(my){dlgStars.innerHTML=[1,2,3,4,5].map(i=>`<span class="star${i<=my?" active":""}" onclick="db.rate('${currentId}',${i});refresh();render()">â˜…</span>`).join("")}
function refresh(){let m=MOVIES.find(x=>x.id===currentId);dlgPoster.innerHTML=`<img src="${m.poster}">`;dlgTitle.textContent=m.title;
dlgTags.innerHTML=m.genres.map(g=>`<span class="tag">${g}</span>`).join("");trailer.href=m.trailer;stars(db.my(currentId));
dlgAvg.textContent=db.avg(currentId)?`Average: ${db.avg(currentId)}/5`:"No ratings yet";reviewsEl.innerHTML=db.comments(currentId).length?db.comments(currentId).map(c=>`<div class="review">${starRow(c.stars)}<div>${c.text}</div></div>`).join(""):"<p>No comments yet.</p>";commentEl.value=""}
function openModal(id){currentId=id;refresh();dlg.showModal()}
closeBtn.onclick=()=>dlg.close();addReview.onclick=()=>{if(!db.my(currentId))return alert("Rate first");if(!commentEl.value.trim())return alert("Write a comment");db.add(currentId,commentEl.value.trim(),db.my(currentId));refresh();render()};
clearMy.onclick=()=>{db.clear(currentId);refresh();render()};
new Set(MOVIES.flatMap(m=>m.genres)).forEach(g=>genreSel.innerHTML+=`<option>${g}</option>`);q.oninput=genreSel.onchange=render;render();
</script>
</body>
</html>
